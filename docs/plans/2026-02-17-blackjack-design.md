# 21点纸牌游戏 - 设计文档

## 技术栈

- React 18 + Vite
- CSS Modules（赌场主题自定义样式）
- useReducer 管理游戏状态
- Web Audio API 合成音效
- 纯 CSS/SVG 绘制纸牌（无图片依赖）

## 项目结构

```
src/
├── main.jsx
├── App.jsx
├── components/
│   ├── Card.jsx          # 单张纸牌
│   ├── Hand.jsx          # 手牌区域
│   ├── ChipStack.jsx     # 筹码显示
│   ├── BettingArea.jsx   # 下注区域
│   ├── Controls.jsx      # 操作按钮
│   └── GameTable.jsx     # 牌桌主界面
├── hooks/
│   └── useGameState.js   # 游戏状态 reducer
├── logic/
│   ├── deck.js           # 牌组管理
│   ├── rules.js          # 规则判定
│   └── dealer.js         # 庄家 AI
├── audio/
│   └── sounds.js         # 音效管理
└── styles/
    └── game.css          # 全局样式
```

## 游戏规则

### 基础规则

- 6 副牌（312 张），剩余 < 25% 时重新洗牌
- A 可计为 1 或 11（自动最优选择）
- Blackjack（A + 10点牌）赔率 3:2
- 庄家 17 点及以上停牌（Soft 17 停牌）

### 进阶规则

- 分牌 (Split)：前两张点数相同，最多分一次
- 加倍 (Double Down)：前两张后加倍下注，仅再拿一张
- 保险 (Insurance)：庄家明牌为 A，赌注一半，庄家 BJ 赔 2:1

### 筹码系统

- 初始筹码：1000
- 筹码面值：5 / 25 / 100 / 500
- 下注范围：10 ~ 500
- localStorage 持久化
- 归零可重新领取 1000

### 游戏流程

```
下注 → 发牌（各2张，庄家1明1暗）→ 保险判断 →
玩家操作（要牌/停牌/分牌/加倍）→ 庄家翻牌补牌 → 结算
```

## 视觉设计

### 配色方案

- 牌桌：深绿渐变 (#0a5c36 → #0d7a48) + 纹理
- 纸牌：白底圆角，CSS 绘制花色
- 筹码：圆形带条纹（5=红 / 25=绿 / 100=黑 / 500=紫）
- 按钮：金色边框 + 深色底 + 悬停发光
- 文字：白色/金色，衬线字体

### 动画

- 发牌：卡牌滑出（0.3s ease-out）
- 翻牌：3D 翻转 rotateY（0.4s）
- 筹码下注：滑入动画
- 结算：赢 = 筹码飞回 + 金色闪光，输 = 筹码淡出

### 音效

- 发牌声、筹码碰撞声、胜/负音效、Blackjack 特殊音效
- Web Audio API 合成，无需外部文件

### 响应式

- 桌面：横向布局
- 移动端：纵向布局，按钮放大
